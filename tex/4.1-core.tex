\section{Анализ предметной области и существующих решений}

\subsection{Проблематика оценки нагрузки на систему ввода-вывода в СУБД}

В современных информационных системах производительность базы данных является критическим фактором, влияющим на общее качество 
работы приложений. Одной из ключевых составляющих производительности является взаимодействие СУБД с подсистемой ввода-вывода. \cite{vershinin2023optimization}

Системы ввода-вывода традиционно считаются одним из узких мест в архитектуре баз данных. В отличие от операций, 
выполняемых исключительно в оперативной памяти, операции чтения и записи данных на дисковые устройства связаны 
с гораздо большими задержками. Даже несмотря на распространение быстродействующих накопителей на базе твердотельной памяти (SSD), 
характер нагрузки на I/O остаётся важнейшим параметром для оценки производительности. \cite{hellerstein2007architecture, malykh2022migration}

Особую сложность представляет оценка планируемой нагрузки на систему ввода-вывода на ранних этапах проектирования систем. 
На этой стадии ещё отсутствуют реальные данные эксплуатации, а экспериментальное моделирование может быть слишком затратным по времени и ресурсам.

В ряде случаев специалисты вынуждены идти на различные ухищрения: использовать сложные схемы оркестрации и автоматизации, 
чтобы максимально эффективно распределять нагрузку, а также разрабатывать специальные подходы по обходу инфраструктурных ограничений.\cite{lazarev2022, Borisova2022} 
Это усложняет инфраструктуру, но зачастую является единственным способом обеспечить требуемый уровень производительности в условиях ограниченных I/O-ресурсов. \cite{Tatarnikova2023}

Таким образом, необходимость в эффективных средствах предварительной оценки нагрузки на подсистему ввода-вывода в системах, 
использующих СУБД PostgreSQL, представляется очевидной и обоснованной.


\subsection{Способы и средства оценки нагрузки на диск} 


\subsubsection{Профилирование реальной нагрузки}
Метод основан на эмпирическом тестировании, когда через генерацию типичных сценариев работы СУБД (с использованием, например, 
\textit{pgbench} или \textit{HammerDB}) непосредственно измеряется реакция системы на заданную нагрузку. 
Такой подход позволяет получить конкретные показатели производительности, выявить узкие места и определить, 
как изменения параметров конфигурации влияют на итоговую производительность базы. Он особенно полезен для оценки критических 
участков системы и построения сценариев оптимизации, однако его применение обременено необходимостью иметь готовую и 
соответствующим образом настроенную инфраструктуру, а также требует значительных временных и вычислительных затрат на 
подготовку тестовых кейсов. При этом данный метод менее применим на начальных этапах разработки, когда еще отсутствует 
полноразмерное окружение. \cite{han2021cardinality}
Многие современные инструменты мониторинга проектируются с учетом того, что их данные будут активно использоваться для 
проведения рефакторинга кода и улучшения архитектуры приложений. Такой подход позволяет разработчикам оперативно выявлять 
узкие места и оптимизировать производительность системы. \cite{alfara2023razrabotka}

\subsubsection{Моделирование нагрузки на основе статистики}
Этот подход базируется на анализе журналов, статистики выполнения запросов и накопленных данных эксплуатации системы. 
Используя такие инструменты, как \textit{pg\_stat\_statements} и \textit{auto\_explain}, можно провести ретроспективный анализ 
и выделить закономерности, характерные для конкретных сценариев работы. Подобное статистическое моделирование позволяет оценить 
интенсивность работы подсистемы ввода-вывода без проведения дополнительных нагрузочных тестов. Однако такой анализ эффективен 
лишь при наличии достаточного объёма исторических данных, то есть в системах, которые уже работают в производственной среде. 
В ряде случаев могут возникать сложности в интерпретации статистики, что требует аккуратной настройки инструментов сбора и анализа данных.

\subsubsection{Теоретическое моделирование}
Данный метод опирается на построение аналитических моделей, позволяющих оценивать время выполнения операций ввода-вывода с учётом характеристик таблиц, 
индексов и структур данных. Примеры таких моделей можно найти в работах Boncz, Stonebraker и других исследователей, 
где используются математические зависимости для прогнозирования производительности. Преимущество метода заключается в том, 
что оценка может быть проведена даже без непосредственного проведения нагрузочных тестов, что делает его удобным для ранних 
стадий проектирования. Вместе с тем требуются глубокие знания внутренней архитектуры СУБД и тщательная калибровка моделей с 
целью минимизации погрешностей, которые могут возникнуть при упрощении реальных рабочих сценариев. \cite{Poltavtseva2024}

\subsubsection{Коммерческие решения}
На современном рынке представлено несколько готовых продуктов, специально разработанных для комплексного мониторинга 
и анализа производительности систем управления базами данных (СУБД). Примером таких систем являются 
\textit{SolarWinds Database Performance Analyzer} и \textit{Pivotal Greenplum Performance Monitor}. 
Данные решения предоставляют широкие возможности по сбору и визуализации данных о производительности. Кроме того, 
они поддерживают функцию оповещений в режиме реального времени, а также предоставляют рекомендации по оптимизации работы СУБД. \cite{Varlamov2023}
Характерной чертой таких коммерческих продуктов является их интеграция с более обширными системами управления IT-инфраструктурой, 
что значительно упрощает их использование в условиях изменяющейся нагрузки.

Однако следует отметить, что высокая стоимость внедрения этих решений и их основная ориентация на уже развернутые системы могут 
ограничивать их применение в новых проектах или при ограниченных бюджетах. В этом контексте особенное значение приобретает 
разработка инструментов, которые позволяют предсказывать нагрузку на диск без необходимости фактического запуска СУБД, 
что является критическим аспектом в стадии планирования систем с высокими требованиями к вводу-выводу.

\begin{table}[H]
    \centering
    \small % Уменьшаем размер шрифта
    \setlength{\tabcolsep}{4pt} % Уменьшаем расстояние между колонками
    \renewcommand{\arraystretch}{1.2} % Увеличиваем межстрочный интервал в таблице
    \begin{tabular}{|p{5cm}|c|c|c|}
        \hline
        \textbf{Характеристика} & \textbf{SolarWinds} & \textbf{Pivotal Greenplum} & \textbf{Redgate SQL Monitor} \\ 
        \hline
        Мониторинг нагрузки на диск & Да & Да & Да \\ 
        \hline
        Глубина анализа & Высокая & Средняя & Средняя \\ 
        \hline
        Визуализация использования & Да & Да & Да \\ 
        \hline
        Настройка оповещений & Да & Да & Ограниченная \\ 
        \hline
        Рекомендации по оптимизации & Да & Да & Нет \\ 
        \hline
    \end{tabular}
    \caption{Сравнение решений для мониторинга нагрузки на диск}
    \label{tab:disk_monitoring}
\end{table}
\subsubsection{Использование методов машинного обучения}

В последние годы всё более широкое распространение получают методы машинного обучения для мониторинга, 
анализа и предсказания нагрузки на дисковые устройства баз данных \cite{zaghloul2024correction, chen2019machine, sun2023predictive}. 
Машинное обучение используется для построения моделей, способных выявлять сложные нелинейные зависимости между характеристиками 
SQL-запросов, размером и локалностью данных, параметрами памяти и вычислительными ресурсами, с одной стороны, 
и степенью вовлечённости дисковой подсистемы PostgreSQL — с другой. \cite{cheng2025rlstorage} Такие модели, учитывающие широкий спектр метрик, 
позволяют не только анализировать текущую нагрузку, но и осуществлять её прогнозирование в различных сценариях эксплуатации системы.

Для построения моделей оценки нагрузки на диск используется как классическое машинное обучение (например, регрессионный анализ, метод опорных векторов, случайный лес),
так и современные методы, основанные на глубоких искусственных нейронных сетях (LSTM, GRU, Transformer-модели). 
Применение нейросетевых архитектур особенно актуально для обработки временных рядов, отражающих эволюцию метрик производительности, 
таких как blks\_read, blks\_hit, xact\_commit, tps получаемых из представлений статистики PostgreSQL (\texttt{pg\_stat\_database}, 
\texttt{pg\_stat\_io}, и др.). В ряде работ предпринимаются попытки интеграции внешних факторов, таких как пики пользовательской активности, 
особенности шаблонов доступа, временные зависимости, что способствует повышению точности предсказаний\cite{sun2023predictive}.

В качестве целевой переменной модели чаще всего выступает один из количественных показателей нагрузки на диск: 
пропускная способность (IOPS), среднее время отклика, суммарное время ожидания операций ввода-вывода или другой интегральный 
показатель из статистики операционной системы (\texttt{iotop}, \texttt{vmstat}) либо внутренней статистики СУБД. 
Анализ данных включает как агрегацию метрик по временным окнам, так и более сложные методы feature engineering, 
направленные на выявление аномалий — например, резкое увеличение количества операций random read/write или неустойчивость latency.

Значительная часть современных исследований посвящена проблеме «предиктивного автоскейлинга» и интеллектуального управления 
ресурсами (Self-driving DBMS). \cite{Tatarnikova2023, Lapin2023} С помощью методов машинного обучения реализуются системы, способные динамически выставлять 
параметры конфигурации файловой и буферной подсистемы PostgreSQL (например, \texttt{shared\_buffers}, \texttt{effective\_cache\_size}, \texttt{work\_mem}), 
предотвращая деградацию производительности за счёт упреждающей реакции на прогнозируемый рост нагрузки. 
Кроме того, подобные системы позволяют выявлять нетривиальные взаимосвязи между различными типами загрузки и 
рхитектурными особенностями аппаратной платформы (SSD, NVMe, HDD) \cite{ozkaya2020deep}.

Важным аспектом внедрения машинного обучения в мониторинг и прогнозирование нагрузки на диск является качество данных и сложность их интерпретации. 
Особое внимание уделяется предварительной очистке данных, обработке пропусков и выбросов, а также подбору релевантных признаков. 
Оценка точности разрабатываемых моделей обычно производится с применением метрик RMSE, MAE, Precision, Recall и других, 
а также посредством кросс-валидации на разнородных рабочих нагрузках (OLTP, OLAP).

Таким образом, машинное обучение открывает новые возможности для детального анализа и прогнозирования нагрузки на дисковую подсистему PostgreSQL. 
Указанные методы позволяют формировать интеллектуальные механизмы оптимизации, 
снижать риск возникновения «узких мест» и обеспечивать высокую производительность баз данных в условиях непредсказуемых изменений 
потока запросов. Интеграция подобных подходов с существующими инструментами мониторинга значительно расширяет потенциал управления 
ресурсами на корпоративных и облачных платформах \cite{sun2023predictive, ozkaya2020deep}.


\subsection{Промежуточные выводы}

В результате проведенного анализа можно сделать следующие выводы:

\begin{itemize}
    \item Эффективная оценка планируемой нагрузки на систему ввода-вывода является важнейшей задачей при проектировании информационных систем на базе PostgreSQL.
    \item Существующие методы в основном ориентированы на постфактум-анализ и не позволяют проводить предварительное прогнозирование нагрузки без фактической генерации запросов.
    \item Разработка специального средства оценки планируемой I/O-нагрузки на основе анализа структуры базы данных и характеристик запросов является актуальной и востребованной задачей.
    \item Для успешной реализации такого средства требуется глубокое понимание архитектуры PostgreSQL, процессов работы с данными и особенностей работы подсистемы ввода-вывода.
\end{itemize}

Итого, представленные подходы обладают своими сильными и слабыми сторонами, а выбор метода оценки I/O-нагрузки должен зависеть 
от конкретных условий эксплуатации и этапа жизненного цикла СУБД. Эти описания логически дополняют приведённую таблицу, 
предоставляя более глубокий анализ каждого метода и обосновывая критерии их выбора.


\subsubsection{Сравнительная таблица существующих решений}

Для наглядного сопоставления рассмотрим сводную таблицу, отражающую ключевые характеристики различных подходов:

\begin{table}[H]
\centering
\small
\begin{tabularx}{\textwidth}{@{}p{3.5cm}X>{\raggedright\arraybackslash}p{4.2cm}>{\raggedright\arraybackslash}p{3.5cm}@{}}
\toprule
\textbf{Подход} & \textbf{Типичные инструменты} & \textbf{Преимущества} & \textbf{Ограничения} \\
\midrule
Профилирование реальной нагрузки & \textit{pgbench}, \textit{HammerDB}, кастомные скрипты & Наиболее приближено к реальной работе системы; позволяет наблюдать влияние конкретных операций & Требует развернутой среды; не подходит для ранних стадий проектирования \\
\addlinespace
Моделирование на основе статистики & \textit{pg\_stat\_statements}, \textit{auto\_explain}, \textit{pgBadger} & Позволяет анализировать уже выполненные запросы и выявлять "узкие места" & Не работает без накопленных данных эксплуатации \\
\addlinespace
Теоретическое моделирование & Модели на основе параметров таблиц и индексов (например, Boncz, Stonebraker) & Может использоваться без запуска реальных запросов; полезно на этапе проектирования & Высокая сложность; возможны значительные отклонения от реального поведения \\
\addlinespace
Операционный мониторинг & \textit{iostat}, \textit{vmstat}, \textit{iotop}, \textit{pg\_stat\_io} (PostgreSQL 16+) & Детализированная информация об I/O-активности на уровне ОС и СУБД & Сложно связать данные напрямую с бизнес-логикой или SQL-нагрузкой \\
\addlinespace
Коммерческие решения & \textit{SolarWinds DPA}, \textit{Greenplum Monitor}, \textit{Datadog}, \textit{New Relic} & Готовая визуализация, алерты, прогнозы; часто поддерживают PostgreSQL из коробки & Дорогие; ориентированы на уже работающие системы \\
\bottomrule
\end{tabularx}
\caption{Сравнение подходов к оценке нагрузки на подсистему ввода-вывода в PostgreSQL}
\label{tab:io_approaches}
\end{table}
